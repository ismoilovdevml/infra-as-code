- name: Using Storage Virtualize collection to change security settings
  hosts: localhost
  vars:
    - clustername: clustername
    - username: username
    - password: password
  
  collections:
    - ibm.storage_virtualize
  gather_facts: no
  connection: local
  tasks:
    - name: Change max failed login limit
      ibm.storage_virtualize.ibm_sv_manage_security:
        clustername: "{{ clustername }}"
        username: "{{ username }}"
        password: "{{ password }}"
        log_path: "/tmp/playbook.debug"
        maxfailedlogins: 5

    - name: Change SSH protocol level
      ibm.storage_virtualize.ibm_sv_manage_security:
        clustername: "{{ clustername }}"
        username: "{{ username }}"
        password: "{{ password }}"
        log_path: "/tmp/playbook.debug"
        sshprotocol: 2